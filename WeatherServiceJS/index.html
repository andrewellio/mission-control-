<!-- Fetches weather data from OpenWeather API using geographical co-ordinates-->
<!-- ENGR 301/302 Victoria University of Wellington 2020-->
<!-- Rocket Launch: Mission Control: Group 12-->
<!-- Elliott Andrews & Marcus Rathod-->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Mission Control Software: Weather</title> <!-- Unless predefined somewhere else-->
</head>
<body>
    <input type="text" placeholder="e.g. -41.2769" id="latID">
    <input type="text" placeholder="e.g. 174.7731" id="lonID">
    <button type="button" onclick="GetJson();">Get Weather</button>
    <!-- Will need proper value checks, e.g. button and text field should stay if not valid city name-->

<script type="text/javascript">

function GetJson(){
    var lat = document.getElementById("latID").value;
    var lon = document.getElementById("lonID").value;

	var URL = "https://api.openweathermap.org/data/2.5/weather?lat="+lat+"&lon="+lon+"&APPID=9dbce15b12f75333f8f274f51793d0ff&mode=xml&units=metric"
    var Httpreq = new XMLHttpRequest(); // a new request
    Httpreq.open("GET",URL,false);
    Httpreq.send(null);
    document.writeln(Httpreq.responseText);       
}

//References
//https://stackoverflow.com/questions/2499567/how-to-make-a-json-call-to-a-url/2499647#2499647
//https://www.tutorialrepublic.com/faq/how-to-get-the-value-of-text-input-field-using-javascript.php

</script>
</body>
</html>

